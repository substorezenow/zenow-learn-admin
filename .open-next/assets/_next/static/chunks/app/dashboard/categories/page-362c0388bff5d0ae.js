(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{479:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(5155),a=r(2115),i=r(6191),n=r(5299),o=r(7828),l=r(532),d=r(1010),c=r(1360),u=r(5239),m=r(9036),g=r(5229),h=r(6046);function x(e){let{category:t,isOpen:r,onClose:i,onSuccess:n}=e,[o,l]=(0,a.useState)({name:"",slug:"",description:"",icon_url:"",banner_image:"",is_active:!0,sort_order:0}),[d,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(t){var e;l({name:t.name||"",slug:t.slug||"",description:t.description||"",icon_url:t.icon_url||"",banner_image:t.banner_image||"",is_active:null==(e=t.is_active)||e,sort_order:Number(t.sort_order)||0})}else l({name:"",slug:"",description:"",icon_url:"",banner_image:"",is_active:!0,sort_order:0})},[t]);let p=e=>{let{name:t,value:r,type:s}=e.target;if("name"!==t||o.slug)l(a=>({...a,[t]:"checkbox"===s?e.target.checked:r}));else{let e=r.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"");l(s=>({...s,[t]:r,slug:e}))}},y=async e=>{e.preventDefault(),c(!0),x(null);try{let e;if(null==t?void 0:t.id){let r={name:o.name||"",slug:o.slug||"",description:o.description||"",icon_url:o.icon_url,banner_image:o.banner_image,sort_order:Number(o.sort_order)||0,is_active:o.is_active};e=await m.A.updateCategory(t.id,r)}else{let t={name:o.name||"",slug:o.slug||"",description:o.description||"",icon_url:o.icon_url,banner_image:o.banner_image,sort_order:Number(o.sort_order)||0,is_active:o.is_active};e=await m.A.createCategory(t)}e.success&&e.data?(n(e.data),i()):x(e.error||"Failed to save category")}catch(e){console.error("Error saving category:",e),x("Error saving category")}finally{c(!1)}};return r?(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:(null==t?void 0:t.id)?"Edit Category":"Create New Category"}),(0,s.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)(g.A,{className:"w-6 h-6"})})]}),u&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:u}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",value:o.name,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Web Development"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,s.jsx)("input",{type:"text",id:"slug",name:"slug",value:o.slug,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., web-development"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:p,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Brief description of this category"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"icon_url",className:"block text-sm font-medium text-gray-700 mb-1",children:"Icon URL"}),(0,s.jsx)("input",{type:"url",id:"icon_url",name:"icon_url",value:o.icon_url,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/icon.svg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"banner_image",className:"block text-sm font-medium text-gray-700 mb-1",children:"Banner Image URL"}),(0,s.jsx)("input",{type:"url",id:"banner_image",name:"banner_image",value:o.banner_image,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://example.com/banner.jpg"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"sort_order",className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),(0,s.jsx)("input",{type:"number",id:"sort_order",name:"sort_order",value:o.sort_order,onChange:p,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",id:"is_active",name:"is_active",checked:o.is_active,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,s.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Active (visible to users)"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:i,className:"px-4 py-2 text-gray-600 hover:text-gray-800",disabled:d,children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:[(0,s.jsx)(h.A,{className:"w-4 h-4"}),d?"Saving...":(null==t?void 0:t.id)?"Update":"Create"]})]})]})]})}):null}function p(){let[e,t]=(0,a.useState)([]),[r,g]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[w,_]=(0,a.useState)(null),[C,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{S()},[]),(0,a.useEffect)(()=>{if(C){let e=setTimeout(()=>k(null),3e3);return()=>clearTimeout(e)}},[C]);let S=async()=>{try{g(!0),p(null);let e=await m.A.getCategoriesAdmin();e.success&&e.data?t(e.data):p("Failed to fetch categories")}catch(e){console.error("Error fetching categories:",e),p("Error loading categories")}finally{g(!1)}},A=async r=>{if(confirm("Are you sure you want to delete this category?")){N(r);try{(await m.A.deleteCategory(r)).success?(t(e.filter(e=>e.id!==r)),k({message:"Category deleted successfully",type:"success"})):k({message:"Failed to delete category",type:"error"})}catch(e){console.error("Error deleting category:",e),k({message:"Error deleting category",type:"error"})}finally{N(null)}}},E=async r=>{try{_(r.id),(await m.A.updateCategory(r.id,{name:r.name,slug:r.slug,description:r.description,icon_url:r.icon_url,banner_image:r.banner_image,sort_order:Number(r.sort_order),is_active:!r.is_active})).success?(t(e.map(e=>e.id===r.id?{...e,is_active:!e.is_active}:e)),k({message:"Category ".concat(r.is_active?"deactivated":"activated"," successfully"),type:"success"})):k({message:"Failed to update category",type:"error"})}catch(e){console.error("Error updating category:",e),k({message:"Error updating category",type:"error"})}finally{_(null)}};return r?(0,s.jsx)("div",{className:"flex justify-center items-center min-h-96",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):h?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),(0,s.jsx)("p",{className:"text-red-600",children:h}),(0,s.jsx)("button",{onClick:S,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]}):(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories Management"}),(0,s.jsxs)("button",{onClick:()=>b(!0),className:"group relative flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 active:scale-95",children:[(0,s.jsx)(i.A,{className:"w-4 h-4 transition-transform group-hover:rotate-90 duration-200"}),(0,s.jsx)("span",{className:"font-semibold",children:"Add Category"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-white rounded-lg opacity-0 group-hover:opacity-10 transition-opacity duration-200"})]})]}),(0,s.jsx)("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden border border-gray-200",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Slug"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sort Order"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,t)=>(0,s.jsxs)("tr",{className:"group hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 transition-all duration-200 hover:shadow-sm border-b border-gray-100 hover:border-gray-200",style:{animationDelay:"".concat(50*t,"ms")},children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-10 w-10 group-hover:scale-105 transition-transform duration-200",children:e.icon_url?(0,s.jsx)(u.default,{className:"h-10 w-10 rounded-full shadow-sm group-hover:shadow-md transition-shadow duration-200",src:e.icon_url,alt:e.name,width:40,height:40}):(0,s.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center shadow-sm group-hover:shadow-md transition-all duration-200",children:(0,s.jsx)("span",{className:"text-gray-600 font-medium group-hover:text-gray-700 transition-colors duration-200",children:e.name.charAt(0).toUpperCase()})})}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.slug}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("button",{onClick:()=>E(e),disabled:w===e.id,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-colors duration-200 ".concat(w===e.id?"bg-gray-100 text-gray-500 cursor-not-allowed":e.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"),children:w===e.id?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"w-3 h-3 animate-spin"}),(0,s.jsx)("span",{children:"Updating..."})]}):e.is_active?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Active"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Inactive"})]})})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.sort_order}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)("button",{onClick:()=>v(e),className:"group relative p-2 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded-lg transition-all duration-200 transform hover:scale-110 active:scale-95",title:"Edit category",children:[(0,s.jsx)(d.A,{className:"w-4 h-4 transition-transform group-hover:rotate-12"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-indigo-100 rounded-lg opacity-0 group-hover:opacity-20 transition-opacity duration-200"})]}),(0,s.jsx)("button",{onClick:()=>A(e.id),disabled:j===e.id,className:"group relative p-2 rounded-lg transition-all duration-200 transform hover:scale-110 active:scale-95 ".concat(j===e.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"),title:"Delete category",children:j===e.id?(0,s.jsx)(n.A,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.A,{className:"w-4 h-4 transition-transform group-hover:rotate-12"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-red-100 rounded-lg opacity-0 group-hover:opacity-20 transition-opacity duration-200"})]})})]})})]},e.id))})]})})}),0===e.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No categories found. Create your first category!"})}),(0,s.jsx)(x,{category:f,isOpen:y||null!==f,onClose:()=>{b(!1),v(null)},onSuccess:r=>{r.id?t(e.map(e=>e.id===r.id?r:e)):t([...e,r]),b(!1),v(null)}}),C&&(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-right duration-300",children:(0,s.jsxs)("div",{className:"group relative px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 backdrop-blur-sm border ".concat("success"===C.type?"bg-gradient-to-r from-green-500 to-green-600 text-white border-green-400":"bg-gradient-to-r from-red-500 to-red-600 text-white border-red-400"),children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center ".concat((C.type,"bg-white bg-opacity-20")),children:(0,s.jsx)("span",{className:"text-sm",children:"success"===C.type?"✓":"✕"})})}),(0,s.jsx)("span",{className:"font-medium",children:C.message}),(0,s.jsx)("button",{onClick:()=>k(null),className:"ml-2 p-1 rounded-full hover:bg-black hover:bg-opacity-20 transition-colors duration-200 group-hover:scale-110",children:(0,s.jsx)("span",{className:"text-lg leading-none",children:"\xd7"})}),(0,s.jsx)("div",{className:"absolute bottom-0 left-0 h-1 bg-white bg-opacity-30 rounded-full animate-pulse"})]})})]})}},820:(e,t,r)=>{Promise.resolve().then(r.bind(r,479))},5229:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5299:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},6046:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(1847).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9036:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});class s{async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.baseURL).concat(e),s={headers:{"Content-Type":"application/json",...t.headers},...t},a=await fetch(r,{...s,credentials:"include"});if(!a.ok){if(401===a.status)throw window.location.href="/login",Error("Session expired");if(403===a.status)throw window.location.href="/login",Error("Access denied");throw Error("HTTP error! status: ".concat(a.status))}return a.json()}clearSession(){fetch("/api/auth/logout",{method:"POST",credentials:"include"})}async getAdminStats(){return this.request("/admin/stats")}async getCategoriesAdmin(){return this.request("/admin/categories")}async createCategory(e){return this.request("/admin/categories",{method:"POST",body:JSON.stringify(e)})}async updateCategory(e,t){return this.request("/admin/categories/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCategory(e){return this.request("/admin/categories/".concat(e),{method:"DELETE"})}async getFieldsAdmin(){return this.request("/admin/fields")}async createField(e){return this.request("/admin/fields",{method:"POST",body:JSON.stringify(e)})}async updateField(e,t){return this.request("/admin/fields/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteField(e){return this.request("/admin/fields/".concat(e),{method:"DELETE"})}async getCoursesAdmin(){return this.request("/admin/courses")}async createCourse(e){return this.request("/admin/courses",{method:"POST",body:JSON.stringify(e)})}async updateCourse(e,t){return this.request("/admin/courses/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCourse(e){return this.request("/admin/courses/".concat(e),{method:"DELETE"})}async createCourseModule(e,t){return this.request("/admin/courses/".concat(e,"/modules"),{method:"POST",body:JSON.stringify(t)})}async updateCourseModule(e,t){return this.request("/admin/modules/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteCourseModule(e){return this.request("/admin/modules/".concat(e),{method:"DELETE"})}async getCategoriesForDropdown(){let e=await this.getCategoriesAdmin();return e.success&&e.data?e.data.map(e=>({value:e.id,label:e.name,slug:e.slug})):[]}async getFieldsForDropdown(){let e=await this.getFieldsAdmin();return e.success&&e.data?e.data.map(e=>({value:e.id,label:e.name,slug:e.slug,category_id:e.id})):[]}async getFieldsByCategoryForDropdown(e){let t=await this.getFieldsAdmin();return t.success&&t.data?t.data.filter(t=>t.id===e).map(e=>({value:e.id,label:e.name,slug:e.slug})):[]}async uploadFile(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image",r=new FormData;return r.append("file",e),r.append("type",t),this.request("/admin/upload",{method:"POST",headers:{},body:r})}constructor(){this.baseURL="/api"}}let a=new s}},e=>{e.O(0,[563,441,255,358],()=>e(e.s=820)),_N_E=e.O()}]);